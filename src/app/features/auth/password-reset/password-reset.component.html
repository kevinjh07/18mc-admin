<div class="container login-container" fxLayout="row" fxLayoutAlign="center center">
  <form [formGroup]="form" fxFlex="30%" fxFlex.sm="50%" fxFlex.xs="90%">
    <mat-card>
      <mat-card-title>18 Admin</mat-card-title>
      <mat-card-subtitle>Redefinir sua senha</mat-card-subtitle>
      <mat-card-content>
        <mat-form-field class="full-width">
          <input id="passwordInput" matInput placeholder="Nova senha" formControlName="newPassword"
            [type]="hideNewPassword ? 'password' : 'text'" autocomplete="new-password">
          <mat-icon id="togglePasswordVisibility" matSuffix (click)="hideNewPassword = !hideNewPassword">
            {{hideNewPassword ? 'visibility' : 'visibility_off'}}
          </mat-icon>
          <mat-error *ngIf="form.controls['newPassword'].invalid">
            <ng-container *ngIf="form.controls['newPassword'].errors?.['required']">Campo
              obrigatório</ng-container>
            <ng-container *ngIf="form.controls['newPassword'].errors?.['minlength']">Mínimo 6 caracteres
            </ng-container>
            <ng-container *ngIf="form.controls['newPassword'].errors?.['maxlength']">Máximo 20 caracteres
            </ng-container>
            <ng-container *ngIf="form.controls['newPassword'].errors?.['pattern']">Pelo menos 1 letra
              maiúscula e 1 número </ng-container>
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width">
          <input id="passwordConfirmInput" matInput placeholder="Confirmação nova senha"
            formControlName="newPasswordConfirm" [type]="hideNewPasswordConfirm ? 'password' : 'text'"
            autocomplete="new-password">
          <mat-icon id="togglePasswordConfirmVisibility" matSuffix
            (click)="hideNewPasswordConfirm = !hideNewPasswordConfirm">
            {{hideNewPasswordConfirm ? 'visibility' : 'visibility_off'}}
          </mat-icon>

          <mat-error *ngIf="form.controls['newPasswordConfirm'].invalid">
            <ng-container *ngIf="form.controls['newPasswordConfirm'].errors?.['required']">Campo
              obrigatório </ng-container>
            <ng-container *ngIf="form.errors?.['mismatch']">As senhas não coincidem </ng-container>
          </mat-error>
        </mat-form-field>

      </mat-card-content>

      <mat-card-actions class="login-actions">
        <button id="submit" mat-raised-button color="primary" [disabled]="form.invalid || loading"
          (click)="resetPassword()">OK</button>
        <button id="cancel" mat-button (click)="cancel()">Voltar para o login</button>
      </mat-card-actions>

    </mat-card>

    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
  </form>
</div>
